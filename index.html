<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>귀여운 사주팔자 웹</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #fff7f0;
      text-align: center;
      padding: 2rem;
      color: #444;
    }
    h1 {
      color: #f06292;
    }
    select, button {
      padding: 0.5rem;
      margin: 0.2rem;
      border: 1px solid #ccc;
      border-radius: 0.5rem;
      font-size: 1rem;
    }
    .result {
      margin-top: 2rem;
      padding: 1.5rem;
      background-color: #fff0f5;
      border-radius: 1rem;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
    }
  </style>
</head>
<body>
  <h1>🧸 나의 사주팔자 보기</h1>
  <p>생년월일시를 선택해주세요!</p>

  <div>
    <select id="year"></select> 년
    <select id="month"></select> 월
    <select id="day"></select> 일
    <select id="hour"></select> 시
  </div>

  <button onclick="getSaju()">🔮 사주 보기</button>

  <div class="result" id="result">
    <h2>🔮 사주 결과</h2>
    <p><strong>사주:</strong> <span id="saju"></span></p>
    <p><strong>설명:</strong> <span id="description"></span></p>
    <p><strong>오행:</strong> <span id="element"></span></p>
    <p><strong>용신:</strong> <span id="yongshin"></span></p>
  </div>

  <script>
    const years = document.getElementById('year');
    const months = document.getElementById('month');
    const days = document.getElementById('day');
    const hours = document.getElementById('hour');

    for (let y = 1950; y <= 2025; y++) {
      years.innerHTML += `<option value="${y}">${y}</option>`;
    }
    for (let m = 1; m <= 12; m++) {
      months.innerHTML += `<option value="${m}">${m}</option>`;
    }
    for (let d = 1; d <= 31; d++) {
      days.innerHTML += `<option value="${d}">${d}</option>`;
    }
    for (let h = 0; h < 24; h++) {
      hours.innerHTML += `<option value="${h}">${h}시</option>`;
    }

    async function getSaju() {
      const year = years.value;
      const month = months.value;
      const day = days.value;
      const hour = hours.value;

      const response = await fetch('data.json');
      const data = await response.json();

      const sajuKey = calculateSajuKey(year, month, day, hour);
      const result = data[sajuKey];

      document.getElementById('saju').textContent = sajuKey || '알 수 없음';

      if (result) {
        document.getElementById('description').textContent = result.설명;
        document.getElementById('element').textContent = result.오행;
        document.getElementById('yongshin').textContent = result.용신;
      } else {
        document.getElementById('description').textContent = '정확한 사주 결과가 없습니다. 비슷한 유형을 분석 중이에요!';
        document.getElementById('element').textContent = '-';
        document.getElementById('yongshin').textContent = '-';
      }
    }

    function calculateSajuKey(year, month, day, hour) {
      // 간단한 예시 매핑: 실제 간지 변환 로직은 별도로 구현 필요
      const stems = ['갑', '을', '병', '정', '무', '기', '경', '신', '임', '계'];
      const branches = ['자', '축', '인', '묘', '진', '사', '오', '미', '신', '유', '술', '해'];
      const y = stems[year % 10] + branches[year % 12];
      const m = stems[month % 10] + branches[month % 12];
      const d = stems[day % 10] + branches[day % 12];
      const h = stems[hour % 10] + branches[hour % 12];
      return `${y}-${m}-${d}-${h}`;
    }
  </script>
</body>
</html>
