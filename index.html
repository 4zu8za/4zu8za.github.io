<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ê·€ì—¬ìš´ ì‚¬ì£¼íŒ”ì ì›¹</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #fff7f0;
      text-align: center;
      padding: 2rem;
      color: #444;
    }
    h1 {
      color: #f06292;
    }
    select, button {
      padding: 0.5rem;
      margin: 0.2rem;
      border: 1px solid #ccc;
      border-radius: 0.5rem;
      font-size: 1rem;
    }
    .result {
      margin-top: 2rem;
      padding: 1.5rem;
      background-color: #fff0f5;
      border-radius: 1rem;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
    }
  </style>
</head>
<body>
  <h1>ğŸ§¸ ë‚˜ì˜ ì‚¬ì£¼íŒ”ì ë³´ê¸°</h1>
  <p>ìƒë…„ì›”ì¼ì‹œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!</p>

  <div>
    <select id="year"></select> ë…„
    <select id="month"></select> ì›”
    <select id="day"></select> ì¼
    <select id="hour"></select> ì‹œ
  </div>

  <button onclick="getSaju()">ğŸ”® ì‚¬ì£¼ ë³´ê¸°</button>

  <div class="result" id="result">
    <h2>ğŸ”® ì‚¬ì£¼ ê²°ê³¼</h2>
    <p><strong>ì‚¬ì£¼:</strong> <span id="saju"></span></p>
    <p><strong>ì„¤ëª…:</strong> <span id="description"></span></p>
    <p><strong>ì˜¤í–‰:</strong> <span id="element"></span></p>
    <p><strong>ìš©ì‹ :</strong> <span id="yongshin"></span></p>
  </div>

  <script>
    const years = document.getElementById('year');
    const months = document.getElementById('month');
    const days = document.getElementById('day');
    const hours = document.getElementById('hour');

    for (let y = 1950; y <= 2025; y++) {
      years.innerHTML += `<option value="${y}">${y}</option>`;
    }
    for (let m = 1; m <= 12; m++) {
      months.innerHTML += `<option value="${m}">${m}</option>`;
    }
    for (let d = 1; d <= 31; d++) {
      days.innerHTML += `<option value="${d}">${d}</option>`;
    }
    for (let h = 0; h < 24; h++) {
      hours.innerHTML += `<option value="${h}">${h}ì‹œ</option>`;
    }

    async function getSaju() {
      const year = years.value;
      const month = months.value;
      const day = days.value;
      const hour = hours.value;

      const response = await fetch('data.json');
      const data = await response.json();

      const sajuKey = calculateSajuKey(year, month, day, hour);
      const result = data[sajuKey];

      document.getElementById('saju').textContent = sajuKey || 'ì•Œ ìˆ˜ ì—†ìŒ';

      if (result) {
        document.getElementById('description').textContent = result.ì„¤ëª…;
        document.getElementById('element').textContent = result.ì˜¤í–‰;
        document.getElementById('yongshin').textContent = result.ìš©ì‹ ;
      } else {
        document.getElementById('description').textContent = 'ì •í™•í•œ ì‚¬ì£¼ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ë¹„ìŠ·í•œ ìœ í˜•ì„ ë¶„ì„ ì¤‘ì´ì—ìš”!';
        document.getElementById('element').textContent = '-';
        document.getElementById('yongshin').textContent = '-';
      }
    }

    function calculateSajuKey(year, month, day, hour) {
      // ê°„ë‹¨í•œ ì˜ˆì‹œ ë§¤í•‘: ì‹¤ì œ ê°„ì§€ ë³€í™˜ ë¡œì§ì€ ë³„ë„ë¡œ êµ¬í˜„ í•„ìš”
      const stems = ['ê°‘', 'ì„', 'ë³‘', 'ì •', 'ë¬´', 'ê¸°', 'ê²½', 'ì‹ ', 'ì„', 'ê³„'];
      const branches = ['ì', 'ì¶•', 'ì¸', 'ë¬˜', 'ì§„', 'ì‚¬', 'ì˜¤', 'ë¯¸', 'ì‹ ', 'ìœ ', 'ìˆ ', 'í•´'];
      const y = stems[year % 10] + branches[year % 12];
      const m = stems[month % 10] + branches[month % 12];
      const d = stems[day % 10] + branches[day % 12];
      const h = stems[hour % 10] + branches[hour % 12];
      return `${y}-${m}-${d}-${h}`;
    }
  </script>
</body>
</html>
